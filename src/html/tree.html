<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>树形数组处理</title>
</head>

<body>
    <script>
        const arr = [{
            name: '小明',
            id: 1,
            pid: 0,
        },
        {
            name: '小花',
            id: 11,
            pid: 1,
        },
        {
            name: '小华',
            id: 111,
            pid: 11,
        },
        {
            name: '小李',
            id: 112,
            pid: 11,
        },
        {
            name: '小红',
            id: 12,
            pid: 1,
        },
        {
            name: '小王',
            id: 2,
            pid: 0,
        },
        {
            name: '小林',
            id: 21,
            pid: 2,
        },
        {
            name: '小李',
            id: 22,
            pid: 2,
        }
        ]



        //非递归方法
        function arrayToTree(arr) {
            let result = [];
            if (!Array.isArray(arr) || arr.length === 0) {
                return result
            }
            let obj = {};
            arr.forEach(item => obj[item.id] = item);

            arr.forEach(ele => {
          
                const parent = obj[ele.pid];
                if (parent) {
                    (parent.children || (parent.children = [])).push(ele);
                } else {
                    result.push(ele);
                }
            })
            return result
        }

        console.log(arrayToTree(arr))

    </script>


</body>

</html>